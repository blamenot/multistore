(function(t){function e(e){for(var n,s,c=e[0],i=e[1],u=e[2],p=0,l=[];p<c.length;p++)s=c[p],o[s]&&l.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);d&&d(e);while(l.length)l.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,c=1;c<r.length;c++){var i=r[c];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/multistore/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=i;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"053a":function(t,e,r){"use strict";var n=r("e8ec"),o=r.n(n);o.a},"06e9":function(t,e,r){"use strict";var n=r("5c9a"),o=r.n(n);o.a},1437:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Showcase"),r("Cart")],1)},a=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"showcase"},t._l(t.goodsGroups,function(t,e){return r("GoodsGroup",{key:e,attrs:{goodsGroupName:e,goodsItems:t}})}),1)},c=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"goods-group-wrapper"},[r("div",{staticClass:"goods-group"},[r("div",{staticClass:"goods-group-header",on:{click:function(e){t.collapsed=!t.collapsed}}},[r("span",[t._v(t._s(t.goodsGroupName))]),r("span",{staticClass:"goods-group-header-tik",class:{collapsed:t.collapsed}},[t._v("\n\t\t\t\t❮\n\t\t\t")])]),r("transition",{attrs:{name:"slide"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.collapsed,expression:"!collapsed"}],staticClass:"goods-items"},t._l(t.goodsItems,function(t){return r("GoodsItem",{key:t.id,attrs:{goodsItem:t}})}),1)])],1)])},d=[],p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"goods-item",on:{click:function(e){return t.addCartItem(t.goodsItem.id)}}},[r("div",{staticClass:"goods-item-name"},[t._v(t._s(t.goodsItem.name)+" ("+t._s(t.goodsItem.left)+")")]),r("div",{staticClass:"goods-item-price"},[r("Price",{attrs:{usd:t.goodsItem.price}})],1)])},l=[],f=r("2f62"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:t.transitionName,mode:"out-in"}},[r("span",{key:t.rate},[t._v(t._s(t.priceInCurrency))])])},v=[];r("c5f6");function b(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var O={usd:Number},h=g({},Object(f["d"])({rate:function(t){var e=t.currency;return e.rate},suffix:function(t){var e=t.currency;return e.suffix},rateComparer:function(t){var e=t.currency;return e.rateComparer}}),{priceInCurrency:function(){return(this.usd*this.rate).toFixed(2)+" "+this.suffix},transitionName:function(){return this.rateComparer>0?"pulse-red":"pulse-green"}}),y={props:O,computed:h},I=y,j=(r("053a"),r("2877")),w=Object(j["a"])(I,m,v,!1,null,"1b2badab",null),C=w.exports,_={components:{Price:C},props:["goodsItem"],methods:Object(f["c"])(["addCartItem"])},P=_,x=(r("7155"),Object(j["a"])(P,p,l,!1,null,"064fb501",null)),G=x.exports,k=function(){return{collapsed:!1}},E={data:k,components:{GoodsItem:G},props:["goodsGroupName","goodsItems"]},S=E,D=(r("06e9"),Object(j["a"])(S,u,d,!1,null,"1d0a182d",null)),$=D.exports,M=r("5118");function Q(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Q(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function q(){var t=this,e=function(){t.$store.dispatch("randomizeRate",{min:20,max:80}),t.$store.dispatch("fetchGoods")};e(),this._updateTimerId=Object(M["setInterval"])(e,15e3)}function T(){clearInterval(this._updateTimerId)}var R=N({},Object(f["d"])({loading:function(t){var e=t.showcase;return e.loading},error:function(t){var e=t.showcase;return e.error}}),{},Object(f["b"])(["goodsGroups"])),z={components:{GoodsGroup:$},created:q,destroyed:T,computed:R},J=z,B=(r("b8d2"),Object(j["a"])(J,s,c,!1,null,"3c89163e",null)),F=B.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"cart"},[t._m(0),r("transition-group",{attrs:{name:"cart",tag:"div"}},t._l(t.goodsItemsInCart,function(t){return r("CartItem",{key:t.id,attrs:{goodsItem:t}})}),1)],1),t.goodsItemsInCart.length?t._e():r("div",{staticClass:"cart-empty"},[t._v("\n\t\tКорзина пуста\n\t")]),r("div",{staticClass:"cart-cost"},[t._v("\n\t\tОбщая стоимость: "),r("b",[r("Price",{staticClass:"cart-cost-value",attrs:{usd:t.goodsItemsInCartCost}})],1)])])},V=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-header"},[r("div",{staticClass:"cart-item-name"},[r("span",{staticClass:"cart-header-name-wide"},[t._v("Наименование товара и описание")]),r("span",{staticClass:"cart-header-name-narrow"},[t._v("Корзина")])]),r("div",{staticClass:"cart-item-quantity"},[t._v("Количество")]),r("div",{staticClass:"cart-item-price"},[t._v("Цена")]),r("div",{staticClass:"cart-item-delete"})])}],A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-item"},[r("div",{staticClass:"cart-item-name"},[t._v(t._s(t.goodsItem.name))]),r("div",{staticClass:"cart-item-attributes"},[r("div",{staticClass:"cart-item-quantity"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.itemQuantity,expression:"itemQuantity",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.itemQuantity},on:{input:function(e){e.target.composing||(t.itemQuantity=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t.outOfStock?r("span",{staticClass:"cart-warning"},[t._v("Товар заканчивается")]):t._e()]),r("div",{staticClass:"cart-item-price"},[r("Price",{attrs:{usd:t.goodsItem.price}}),t._v(" /шт")],1),r("div",{staticClass:"cart-item-delete"},[r("button",{on:{click:function(e){return t.deleteCartItem(t.goodsItem.id)}}},[t._v("удалить")])])])])},H=[];function K(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var W=function(){return{outOfStock:!1}},X=L({},Object(f["c"])(["deleteCartItem","setCartItemQuantity"])),Y=L({},Object(f["b"])(["cartItemsMap"]),{itemQuantity:{get:function(){return this.cartItemsMap[this.goodsItem.id]},set:function(t){t&&this.setCartItemQuantity({goodsItemId:this.goodsItem.id,quantity:t})}}}),Z={itemQuantity:function(t){t>this.goodsItem.left?(this.itemQuantity=this.goodsItem.left,this.outOfStock=!0):t<this.goodsItem.left&&(this.outOfStock=!1)}},tt={components:{Price:C},props:["goodsItem"],data:W,methods:X,computed:Y,watch:Z},et=tt,rt=(r("8c66"),Object(j["a"])(et,A,H,!1,null,"921e6dc0",null)),nt=rt.exports;function ot(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var st=at({},Object(f["b"])(["processedGoods","cartItemsMap"]),{},Object(f["d"])({cartItems:function(t){var e=t.cart;return e.cartItems}}),{goodsItemsInCart:function(){var t=this;return this.cartItems.map(function(e){return t.processedGoods.filter(function(t){return e.id===t.id})[0]})},goodsItemsInCartCost:function(){var t=this;return this.goodsItemsInCart.reduce(function(e,r){var n=t.cartItemsMap[r.id];return e+r.price*n},0)}}),ct={components:{CartItem:nt,Price:C},computed:st},it=ct,ut=(r("b811"),Object(j["a"])(it,U,V,!1,null,"36b0ffa0",null)),dt=ut.exports,pt={name:"app",components:{Showcase:F,Cart:dt}},lt=pt,ft=Object(j["a"])(lt,o,a,!1,null,null,null),mt=ft.exports,vt=(r("6b54"),r("96cf"),r("3b8d")),bt={loading:!0,error:"",goods:[]},gt={loading:function(t){t.loading=!0},loaded:function(t){t.loading=!1},setError:function(t,e){t.error=e},setGoods:function(t,e){t.goods=e}},Ot={fetchGoods:function(){var t=Object(vt["a"])(regeneratorRuntime.mark(function t(e){var r,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.dispatch,r=e.commit,r("loading"),t.prev=2,t.next=5,fetch("data.json");case 5:return n=t.sent,t.next=8,n.json();case 8:if(o=t.sent,!o.Error){t.next=11;break}throw Error(o.Error);case 11:r("setGoods",o.Value.Goods),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),r("setError",t.t0.toString());case 17:r("loaded");case 18:case"end":return t.stop()}},t,null,[[2,14]])}));function e(e){return t.apply(this,arguments)}return e}()},ht={processedGoods:function(t){var e=t.goods;return e.map(function(t){return{id:t.T,name:window.store[t.G].B[t.T].N,price:t.C,left:t.P,groupId:t.G}})},goodsGroups:function(t,e){var r=e.processedGoods,n={};return r.forEach(function(t){var e=window.store[t.groupId].G;n[e]?n[e].push(t):n[e]=[t]}),n}},yt={state:bt,mutations:gt,actions:Ot,getters:ht},It={suffix:"руб",rate:0,rateComparer:0},jt={setRate:function(t,e){0===t.rate||t.rate===e?t.rateComparer=0:t.rateComparer=t.rate<e?1:-1,t.rate=e}},wt={randomizeRate:function(t,e){var r=t.commit,n=e.min,o=e.max,a=Math.random()*(o-n)+n;r("setRate",a)}},Ct={state:It,mutations:jt,actions:wt},_t={cartItems:[]},Pt={addCartItem:function(t,e){var r=t.cartItems,n=0,o=0;while(o<r.length){if(r[o].id===e){n=r[o].quantity;break}o++}r.splice(o,1,{id:e,quantity:n+1})},deleteCartItem:function(t,e){t.cartItems=t.cartItems.filter(function(t){return t.id!==e})},setCartItemQuantity:function(t,e){var r=e.goodsItemId,n=e.quantity;t.cartItems=t.cartItems.map(function(t){return t.id==r?{id:r,quantity:n}:t})}},xt={cartItemsMap:function(t){var e=t.cartItems;return e.reduce(function(t,e){return t[e.id]=e.quantity,t},{})}},Gt={state:_t,mutations:Pt,getters:xt};n["a"].use(f["a"]);var kt=new f["a"].Store({modules:{showcase:yt,currency:Ct,cart:Gt}});r("db43");n["a"].config.productionTip=!1,new n["a"]({store:kt,render:function(t){return t(mt)}}).$mount("#app")},"5c9a":function(t,e,r){},"6b84":function(t,e,r){},7155:function(t,e,r){"use strict";var n=r("c8e8"),o=r.n(n);o.a},"8c66":function(t,e,r){"use strict";var n=r("e511"),o=r.n(n);o.a},b811:function(t,e,r){"use strict";var n=r("6b84"),o=r.n(n);o.a},b8d2:function(t,e,r){"use strict";var n=r("1437"),o=r.n(n);o.a},c8e8:function(t,e,r){},db43:function(t,e,r){},e511:function(t,e,r){},e8ec:function(t,e,r){}});
//# sourceMappingURL=app.67836cd0.js.map